<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>WebXR Grid Interface</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script>
        // Custom component for button interaction
        AFRAME.registerComponent('button-handler', {
            schema: {
                text: {type: 'string', default: 'Button'},
                color: {type: 'string', default: '#3498db'}
            },
            
            init: function() {
                const el = this.el;
                const data = this.data;
                
                // Create button elements
                const button = document.createElement('a-entity');
                button.setAttribute('geometry', 'primitive: plane; width: 0.3; height: 0.3');
                button.setAttribute('material', `color: ${data.color}; shader: flat`);
                button.setAttribute('position', '0 0 0.01');
                
                const text = document.createElement('a-text');
                text.setAttribute('value', data.text);
                text.setAttribute('position', '0 0 0.02');
                text.setAttribute('align', 'center');
                text.setAttribute('color', '#ffffff');
                text.setAttribute('width', '0.5');
                
                el.appendChild(button);
                el.appendChild(text);
                
                // Interaction handlers
                el.addEventListener('click', () => {
                    el.setAttribute('scale', '0.95 0.95 0.95');
                    setTimeout(() => el.setAttribute('scale', '1 1 1'), 200);
                    console.log(`Button clicked: ${data.text}`);
                    // Add your custom action here
                });
                
                el.addEventListener('mouseenter', () => {
                    el.setAttribute('material', `color: ${this.darkenColor(data.color, 20)}`);
                });
                
                el.addEventListener('mouseleave', () => {
                    el.setAttribute('material', `color: ${data.color}`);
                });
            },
            
            darkenColor: function(hex, percent) {
                const num = parseInt(hex.replace('#', ''), 16);
                const amt = Math.round(2.55 * percent);
                const R = (num >> 16) - amt;
                const G = (num >> 8 & 0x00FF) - amt;
                const B = (num & 0x0000FF) - amt;
                return '#' + (
                    0x1000000 + 
                    (R < 255 ? (R < 1 ? 0 : R) : 255) * 0x10000 + 
                    (G < 255 ? (G < 1 ? 0 : G) : 255) * 0x100 + 
                    (B < 255 ? (B < 1 ? 0 : B) : 255)
                ).toString(16).slice(1);
            }
        });
    </script>
    <style>
        .a-enter-vr-button {
            background: #e74c3c;
            border: none;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <a-scene 
        webxr="overlayElement: #ui-overlay" 
        renderer="antialias: true; colorManagement: true"
        cursor="rayOrigin: mouse"
        raycaster="objects: .button"
    >
        <!-- Camera with cursor -->
        <a-camera position="0 1.6 2">
            <a-cursor 
                fuse="true" 
                fuse-timeout="500"
                raycaster="objects: .button"
                animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
                animation__mouseenter="property: scale; startEvents: mouseenter; from: 1 1 1; to: 1.2 1.2 1.2; dur: 150"
                animation__mouseleave="property: scale; startEvents: mouseleave; from: 1.2 1.2 1.2; to: 1 1 1; dur: 150">
            </a-cursor>
        </a-camera>

        <!-- Background plane -->
        <a-plane 
            position="0 1.6 -3"
            rotation="0 0 0"
            width="4"
            height="3"
            color="#2c3e50"
            shadow="receive: true">
        </a-plane>

        <!-- Grid of buttons -->
        <a-entity id="button-grid" position="0 1.6 -2.9">
            <!-- Row 1 -->
            <a-entity class="button" button-handler="text: Home; color: #3498db" position="-0.8 0.4 0"></a-entity>
            <a-entity class="button" button-handler="text: Gallery; color: #2ecc71" position="0 0.4 0"></a-entity>
            <a-entity class="button" button-handler="text: About; color: #e74c3c" position="0.8 0.4 0"></a-entity>
            
            <!-- Row 2 -->
            <a-entity class="button" button-handler="text: Play; color: #f39c12" position="-0.8 -0.2 0"></a-entity>
            <a-entity class="button" button-handler="text: Settings; color: #9b59b6" position="0 -0.2 0"></a-entity>
            <a-entity class="button" button-handler="text: Help; color: #1abc9c" position="0.8 -0.2 0"></a-entity>
            
            <!-- Row 3 -->
            <a-entity class="button" button-handler="text: Prev; color: #7f8c8d" position="-0.8 -0.8 0"></a-entity>
            <a-entity class="button" button-handler="text: Menu; color: #34495e" position="0 -0.8 0"></a-entity>
            <a-entity class="button" button-handler="text: Next; color: #27ae60" position="0.8 -0.8 0"></a-entity>
        </a-entity>

        <!-- Lighting -->
        <a-light type="ambient" color="#ffffff" intensity="0.5"></a-light>
        <a-light 
            type="directional" 
            color="#ffffff" 
            intensity="0.8"
            position="1 3 2">
        </a-light>
    </a-scene>

    <!-- UI Overlay for VR entry button -->
    <div id="ui-overlay"></div>
</body>
</html>
